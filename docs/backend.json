{
  "entities": {
    "Report": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Report",
      "type": "object",
      "description": "Represents a user-submitted report about a suspicious food expiry label.",
      "properties": {
        "productName": {
          "type": "string",
          "description": "The name of the product with the suspicious expiry label."
        },
        "labelDescription": {
          "type": "string",
          "description": "A detailed description of the expiry label and why it is suspicious."
        },
        "storeLocation": {
          "type": "string",
          "description": "The location of the store where the product was found."
        },
        "photoUrl": {
          "type": "string",
          "description": "URL of the uploaded image of the expiry label.",
          "format": "uri"
        },
        "submissionDate": {
          "type": "string",
          "description": "The date and time the report was submitted.",
          "format": "date-time"
        },
        "reportStatus": {
          "type": "string",
          "description": "The current status of the report (e.g., submitted, under review, action taken).",
          "enum": [
            "Pending",
            "Reviewed",
            "Action Taken"
          ]
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who submitted the report."
        },
        "analysisResult": {
          "type": "string",
          "description": "The AI analysis result of the expiry label image."
        }
      },
      "required": [
        "productName",
        "labelDescription",
        "storeLocation",
        "photoUrl",
        "submissionDate",
        "reportStatus",
        "userId",
        "analysisResult"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Shelf Watch system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user (UID from Firebase Auth)."
        },
        "email": {
          "type": "string",
          "description": "The user's email address (if provided).",
          "format": "email"
        },
        "registrationDate": {
          "type": "string",
          "description": "The date and time the user first signed in.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "registrationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Collection of user profiles. User ID from Auth is used as the document ID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/reports/{reportId}",
        "definition": {
          "entityName": "Report",
          "schema": {
            "$ref": "#/backend/entities/Report"
          },
          "description": "Collection of all reports submitted by all users. Security rules will govern access.",
          "params": [
            {
              "name": "reportId",
              "description": "The unique identifier of the report."
            }
          ]
        }
      }
    ]
  }
}
